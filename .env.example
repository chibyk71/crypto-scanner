# =============================================================================
# .env.example – Copy to .env and fill in your secrets
# This file is 100% in sync with src/lib/config/settings.ts (Zod schema)
# =============================================================================

# ──────────────────────────────────────────────────────────────
# Core Environment
# ──────────────────────────────────────────────────────────────
ENV=dev                          # dev | test | prod
LOG_LEVEL=info                   # error | warn | info | debug

# ──────────────────────────────────────────────────────────────
# Database (SQLite / Turso LibSQL)
# ──────────────────────────────────────────────────────────────
DATABASE_URL=file:local.db
# Example for Turso:
# DATABASE_URL=libsql://your-db-name-yourusername.turso.io?authToken=your-auth-token

# ──────────────────────────────────────────────────────────────
# Exchange (Bybit recommended)
# ──────────────────────────────────────────────────────────────
EXCHANGE=bybit                   # bybit | gate | binance
EXCHANGE_API_KEY=               # ← Live trading key (leave blank for read-only)
EXCHANGE_API_SECRET=             # ← Live trading secret
EXCHANGE_TESTNET=true            # Set to false for live trading
EXCHANGE_TESTNET_API_KEY=        # Testnet key (optional)
EXCHANGE_TESTNET_API_SECRET=     # Testnet secret (optional)

# Master kill-switch for live trading (requires live keys + false testnet)
AUTO_TRADE=false                 # Only true if you want REAL orders

# ──────────────────────────────────────────────────────────────
# Telegram Alerts & Heartbeats
# ──────────────────────────────────────────────────────────────
TELEGRAM_BOT_TOKEN=123456:ABCdefGhIJKlmnoPQRstuvWXyz
TELEGRAM_CHAT_ID=-1001234567890  # Your private channel or group ID

# ──────────────────────────────────────────────────────────────
# Symbols to Scan
# ──────────────────────────────────────────────────────────────
SYMBOLS=BTC/USDT,ETH/USDT,SOL/USDT,XRP/USDT,DOGE/USDT,ADA/USDT,AVAX/USDT,LTC/USDT,LINK/USDT,TON/USDT,SUI/USDT,WIF/USDT,ONDO/USDT,PEPE/USDT,FLOKI/USDT

# ──────────────────────────────────────────────────────────────
# Timeframes
# ──────────────────────────────────────────────────────────────
TIMEFRAME=3m                     # Primary scanner candles
HTF_TIMEFRAME=1h                 # Higher timeframe alignment

# ──────────────────────────────────────────────────────────────
# Scanner Behavior
# ──────────────────────────────────────────────────────────────
SCAN_INTERVAL_MS=60000           # Full scan every 60 seconds
HEARTBEAT_INTERVAL=30            # Send heartbeat every 30 cycles (~30 min)
HISTORY_LENGTH=300               # Number of candles to keep in memory

# ──────────────────────────────────────────────────────────────
# Risk Management & Strategy
# ──────────────────────────────────────────────────────────────
ATR_MULTIPLIER=1.5               # Stop-loss distance in ATR
RISK_REWARD_TARGET=3.0           # Minimum R:R (e.g. 3 = 1:3)
TRAILING_STOP_PERCENT=0.6        # Trail when price moves X% in favor
POSITION_SIZE_PERCENT=1.0        # Risk 1% of balance per trade
LEVERAGE=5                       # Futures leverage (1 = spot)

# ──────────────────────────────────────────────────────────────
# Market Filters (Avoid junk signals)
# ──────────────────────────────────────────────────────────────
CONFIDENCE_THRESHOLD=68          # Minimum signal confidence (0–100)
MIN_ADX_TREND=20                 # Minimum ADX for trending market
MIN_BB_BANDWIDTH_PCT=0.5         # Avoid completely flat Bollinger Bands
MIN_AVG_VOLUME_USD_PER_HOUR=50000

# ──────────────────────────────────────────────────────────────
# 5-Tier ML Labeling Thresholds (R-multiple based)
# ──────────────────────────────────────────────────────────────
ML_LABEL_STRONG_WIN=3.0          # R ≥ 3.0 → label +2 (monster win)
ML_LABEL_GOOD_WIN=1.5            # R ≥ 1.5 → label +1 (good win)
ML_LABEL_BREAK_EVEN=-0.5         # R ≥ -0.5 → label 0 (neutral)
ML_LABEL_SMALL_LOSS=-1.5         # R ≥ -1.5 → label -1 (acceptable loss)
# Below -1.5 → label -2 automatically

# ──────────────────────────────────────────────────────────────
# Simulation Engine (for ML training)
# ──────────────────────────────────────────────────────────────
SIMULATION_TIMEOUT_MINUTES=60
SIMULATION_POLL_INTERVAL_MS=15000   # 15-second precision
SIMULATION_DEFAULT_RISK_PCT=1.5     # Fallback risk if no SL

# ──────────────────────────────────────────────────────────────
# Partial Take-Profit Levels (R-multiple based)
# Format: "R:weight,R:weight" → weight must sum ≤ 1.0
# Example: 40% at 1.5R, 30% at 3R, 30% at 6R
# ──────────────────────────────────────────────────────────────
PARTIAL_TP_LEVELS=1.5:0.4,3.0:0.3,6.0:0.3

# ──────────────────────────────────────────────────────────────
# Machine Learning
# ──────────────────────────────────────────────────────────────
MIN_SAMPLES_TO_TRAIN=150
MODEL_PATH=./models/rf_model.json
TRAINING_MODE=true               # Set to false to freeze model

# ──────────────────────────────────────────────────────────────
# Worker & Concurrency
# ──────────────────────────────────────────────────────────────
LOCK_TYPE=database               # database | file
SCANNER_MODE=periodic            # periodic | single (for cron)

# ──────────────────────────────────────────────────────────────
# REST API (optional)
# ──────────────────────────────────────────────────────────────
API_PORT=3000